<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wristband ‚Äî VFX & Video Projects (Team Assignments)</title>
  <style>
    :root{--bg:#071223;--card:#0b1b2a;--muted:#9aa8bf;--accent:#7c5cff;--accent-2:#00d4ff;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#071223,#04101a);color:#e6eef8}
    .app{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
    .sidebar{padding:20px;border-right:1px solid rgba(255,255,255,0.03)}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;font-weight:700}
    nav{margin-top:18px}
    .nav-item{padding:10px;border-radius:10px;color:var(--muted);cursor:pointer}
    .nav-item.active{background:linear-gradient(90deg,rgba(124,92,255,0.08),rgba(0,212,255,0.03));color:var(--accent)}
    .main{padding:20px}
    .topbar{display:flex;justify-content:space-between;align-items:center}
    .search{display:flex;gap:8px;align-items:center;background:var(--glass);padding:8px;border-radius:10px;width:420px}
    .btn{padding:8px 12px;border-radius:8px;border:none;background:linear-gradient(90deg,var(--accent),#6b57ff);color:white;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.05)}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .project-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
    .thumb{height:120px;border-radius:8px;background:#061226;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .right-panel{padding:12px;border-radius:10px}
    .team .member{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px}
    .avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.show{display:flex}
    .modal-card{background:#071223;padding:12px;border-radius:10px;width:100%;max-width:1000px}
    .form-row{display:flex;gap:8px;align-items:center}
    .input,select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .chips{display:flex;gap:6px;flex-wrap:wrap}
    .chip{padding:6px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
    @media (max-width:880px){.app{grid-template-columns:1fr}.sidebar{display:none}.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="logo">WB</div>
        <div>
          <h2 style="margin:0">Wristband</h2>
          <div style="font-size:12px;color:var(--muted)">VFX & Video Projects</div>
        </div>
      </div>
      <nav>
        <div class="nav-item active" data-view="projects">üìÅ Projects</div>
        <div class="nav-item" data-view="uploads">‚¨ÜÔ∏è Uploads</div>
        <div class="nav-item" data-view="team">üë• Team</div>
        <div style="margin-top:18px;color:var(--muted);font-size:13px">Manage which member worked on which project ‚Äî assign when creating projects or uploading files.</div>
      </nav>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="search"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><input id="q" class="input" placeholder="Search by name, project or member..."/></div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn ghost" id="import-sample">Import sample</button>
          <button class="btn" id="btn-new-project">New Project</button>
        </div>
      </div>

      <div class="grid">
        <section>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
              <h3 style="margin:0">Projects</h3>
              <div style="font-size:13px;color:var(--muted)"><span id="count-projects">0</span> projects ‚Ä¢ <span id="count-assets">0</span> assets</div>
            </div>

            <div style="margin-bottom:10px" class="form-row">
              <label style="font-size:13px;color:var(--muted);min-width:110px">Attach upload to project</label>
              <select id="attach-project" class="input">
                <option value="">‚Äî choose project ‚Äî</option>
              </select>
              <label style="margin-left:auto;font-size:12px;color:var(--muted)">Upload files:</label>
              <input id="file-input" type="file" multiple accept="video/*,image/*" />
            </div>

            <div id="project-list" class="project-list"></div>
          </div>
        </section>

        <aside class="card right-panel">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h4 style="margin:0">Team Members</h4>
            <button class="btn ghost" id="btn-add-member">Add</button>
          </div>
          <div id="team-list" style="margin-top:10px" class="team"></div>

          <div style="margin-top:12px">
            <h4 style="margin:0">Quick Filters</h4>
            <div style="margin-top:8px" class="chips" id="member-filter"></div>
          </div>
        </aside>
      </div>

      <!-- modal (create project / preview / member) -->
      <div class="modal" id="modal">
        <div class="modal-card" id="modal-card"></div>
      </div>

    </main>
  </div>

  <script>
    // Simple single-file dashboard with project <-> member associations
    const STORAGE_KEY = 'wristband_projects_v2';

    // initial sample team
    const DEFAULT_TEAM = [
      {id:1,name:'Asha Verma',role:'Lead Compositor'},
      {id:2,name:'Rahul Sen',role:'Editor / VFX Artist'},
      {id:3,name:'Maya Iyer',role:'Motion Designer'},
      {id:4,name:'Karan Patel',role:'Rotoscoping Lead'}
    ];

    // state: {projects:[],members:[],assets:[]}
    let state = JSON.parse(localStorage.getItem(STORAGE_KEY) || 'null') || {projects:[],members:DEFAULT_TEAM,assets:[]};

    // elements
    const projectList = document.getElementById('project-list');
    const teamList = document.getElementById('team-list');
    const q = document.getElementById('q');
    const attachProjectSelect = document.getElementById('attach-project');
    const fileInput = document.getElementById('file-input');
    const modal = document.getElementById('modal');
    const modalCard = document.getElementById('modal-card');

    function persist(){localStorage.setItem(STORAGE_KEY, JSON.stringify(state));}

    function init(){renderTeam();renderProjectOptions();renderProjects();updateCounts();bindUI();}

    function bindUI(){
      document.getElementById('btn-new-project').addEventListener('click', openCreateProject);
      document.getElementById('import-sample').addEventListener('click', importSample);
      document.getElementById('btn-add-member').addEventListener('click', openAddMember);
      fileInput.addEventListener('change', async (e)=>{const files=Array.from(e.target.files||[]);await handleUpload(files);fileInput.value='';});
      q.addEventListener('input', renderProjects);
      document.getElementById('attach-project').addEventListener('change', (e)=>{
        // no-op; when uploading, selected project will be used
      });
      document.addEventListener('click', (e)=>{if(e.target===modal) closeModal();});
    }

    // Projects
    function openCreateProject(){
      modal.classList.add('show');
      modalCard.innerHTML = `
        <h3>Create New Project</h3>
        <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
          <input id="proj-name" class="input" placeholder="Project name" />
          <textarea id="proj-desc" class="input" placeholder="Short description" rows="3"></textarea>
          <div style="font-size:13px;color:var(--muted)">Assign members</div>
          <div id="proj-members" class="chips"></div>
          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
            <button class="btn ghost" id="cancel-proj">Cancel</button>
            <button class="btn" id="save-proj">Create</button>
          </div>
        </div>
      `;
      // render member chips
      const chips = document.getElementById('proj-members');
      for(const m of state.members){
        const c = document.createElement('div');c.className='chip';c.textContent=m.name;c.dataset.id=m.id;chips.appendChild(c);
        c.addEventListener('click', ()=>c.classList.toggle('active'));
      }
      document.getElementById('cancel-proj').addEventListener('click', closeModal);
      document.getElementById('save-proj').addEventListener('click', ()=>{
        const name = document.getElementById('proj-name').value.trim();
        if(!name){alert('Enter project name');return}
        const desc = document.getElementById('proj-desc').value.trim();
        const selected = Array.from(chips.querySelectorAll('.chip.active')).map(c=>parseInt(c.dataset.id));
        const p = {id:Date.now(),name,desc,members:selected,created:new Date().toISOString(),assets:[]};
        state.projects.unshift(p);persist();renderProjects();renderProjectOptions();updateCounts();closeModal();
      });
    }

    function renderProjectOptions(){
      attachProjectSelect.innerHTML = '<option value="">‚Äî choose project ‚Äî</option>';
      for(const p of state.projects){
        const o = document.createElement('option');o.value=p.id;o.textContent=p.name;attachProjectSelect.appendChild(o);
      }
    }

    function renderProjects(){
      const query = q.value.trim().toLowerCase();
      projectList.innerHTML='';
      if(!state.projects.length){projectList.innerHTML='<div style="color:var(--muted);padding:20px">No projects yet. Create a new project to start assigning members and uploading assets.</div>';return}
      for(const p of state.projects){
        if(query && !p.name.toLowerCase().includes(query) && !(p.desc||'').toLowerCase().includes(query) && !p.members.some(id=>{const m = state.members.find(mm=>mm.id===id); return m && m.name.toLowerCase().includes(query)})) continue;
        const card = document.createElement('div');card.className='card';
        const title = document.createElement('div');title.innerHTML = `<div style="font-weight:700">${escapeHtml(p.name)}</div><div style="font-size:12px;color:var(--muted)">${escapeHtml(p.desc||'')}</div>`;
        const memberRow = document.createElement('div');memberRow.style.display='flex';memberRow.style.gap='6px';memberRow.style.marginTop='8px';
        for(const id of p.members){const m = state.members.find(mm=>mm.id===id); if(m){const a = document.createElement('div');a.className='chip';a.textContent=m.name;memberRow.appendChild(a)}}
        const assetsWrap = document.createElement('div');assetsWrap.style.marginTop='8px';
        if(p.assets && p.assets.length){
          const grid = document.createElement('div');grid.style.display='grid';grid.style.gridTemplateColumns='1fr 1fr';grid.style.gap='8px';
          for(const aid of p.assets){const asset = state.assets.find(x=>x.id===aid); if(!asset) continue; const thumb = document.createElement('div');thumb.className='thumb';
            if(asset.type==='video'){const v=document.createElement('video');v.src=asset.url;v.muted=true;v.playsInline=true;v.loop=true;v.autoplay=true;thumb.appendChild(v)}else if(asset.type==='image'){const img=document.createElement('img');img.src=asset.url;img.style.maxWidth='100%';thumb.appendChild(img)}else{thumb.textContent='FILE'}
            const meta = document.createElement('div');meta.style.display='flex';meta.style.justifyContent='space-between';meta.style.alignItems='center';meta.style.marginTop='6px';meta.innerHTML = `<div style="font-size:13px">${escapeHtml(asset.name)}</div><div><button class='btn ghost' data-id='${asset.id}'>Preview</button><button class='btn ghost' data-del='${asset.id}' style='margin-left:6px'>Delete</button></div>`;
            const wrap = document.createElement('div');wrap.appendChild(thumb);wrap.appendChild(meta);grid.appendChild(wrap);
          }
          assetsWrap.appendChild(grid);
        } else {
          assetsWrap.innerHTML = '<div style="color:var(--muted);padding:8px">No assets attached</div>';
        }

        const actions = document.createElement('div');actions.style.marginTop='10px';actions.style.display='flex';actions.style.justifyContent='space-between';
        const left = document.createElement('div');left.innerHTML = `<div style='font-size:12px;color:var(--muted)'>Created: ${new Date(p.created).toLocaleString()}</div>`;
        const right = document.createElement('div');right.innerHTML = `<button class='btn ghost' data-edit='${p.id}'>Edit</button> <button class='btn ghost' data-del='${p.id}'>Delete</button>`;
        actions.appendChild(left);actions.appendChild(right);

        card.appendChild(title);card.appendChild(memberRow);card.appendChild(assetsWrap);card.appendChild(actions);
        projectList.appendChild(card);
      }

      // bind dynamic buttons
      projectList.querySelectorAll('button[data-id]').forEach(b=>b.addEventListener('click', (e)=>{const id=parseInt(b.dataset.id);openPreview(id);}));
      projectList.querySelectorAll('button[data-del]').forEach(b=>b.addEventListener('click', (e)=>{const v = b.dataset.del; if(b.dataset.del==parseInt(b.dataset.del)){ // asset delete
          const aid = parseInt(b.dataset.del); if(confirm('Delete asset?')){state.assets = state.assets.filter(x=>x.id!==aid); // also remove from projects
            state.projects.forEach(p=>{p.assets = p.assets.filter(x=>x!==aid)});persist();renderProjects();updateCounts();}
        } else { // project delete
          const pid = parseInt(b.dataset.del); if(confirm('Delete project and unlink assets?')){state.projects = state.projects.filter(x=>x.id!==pid);persist();renderProjects();renderProjectOptions();updateCounts();}
        }}));

      projectList.querySelectorAll('button[data-edit]').forEach(b=>b.addEventListener('click', ()=>{
        const pid = parseInt(b.dataset.edit); openEditProject(pid);
      }));
    }

    // Assets / uploads
    async function handleUpload(files){
      if(!files.length) return;
      const attachTo = parseInt(attachProjectSelect.value) || null;
      for(const file of files){
        const id = Date.now()+Math.floor(Math.random()*9999);
        const type = file.type.startsWith('video') ? 'video' : (file.type.startsWith('image') ? 'image' : 'file');
        const url = URL.createObjectURL(file);
        const asset = {id,name:file.name,type,mime:file.type,url,size:file.size,created:new Date().toISOString()};
        state.assets.unshift(asset);
        if(attachTo){
          const proj = state.projects.find(p=>p.id===attachTo); if(proj){proj.assets.unshift(asset.id)}
        }
      }
      persist();renderProjects();updateCounts();
    }

    function openPreview(assetId){
      const asset = state.assets.find(a=>a.id===assetId); if(!asset){alert('Asset not found');return}
      modal.classList.add('show');
      modalCard.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><h3>${escapeHtml(asset.name)}</h3><button class='btn ghost' id='close-modal'>Close</button></div><div style='margin-top:8px'>${asset.type==='video'?`<video controls autoplay style='width:100%;max-height:480px' src='${asset.url}'></video>`:`<img src='${asset.url}' style='max-width:100%;border-radius:6px' />`}</div>`;
      document.getElementById('close-modal').addEventListener('click', closeModal);
    }

    function closeModal(){modal.classList.remove('show');modalCard.innerHTML='';}

    // Team
    function renderTeam(){teamList.innerHTML='';for(const m of state.members){const el=document.createElement('div');el.className='member';el.innerHTML=`<div class='avatar'>${m.name.split(' ').map(x=>x[0]).slice(0,2).join('')}</div><div style='flex:1'><div style='font-weight:700'>${m.name}</div><div style='font-size:12px;color:var(--muted)'>${m.role}</div></div><div><button class='btn ghost' data-id='${m.id}'>Edit</button></div>`;teamList.appendChild(el);}teamList.querySelectorAll('button[data-id]').forEach(b=>b.addEventListener('click', ()=>openEditMember(parseInt(b.dataset.id))));renderMemberFilter();}

    function openAddMember(){modal.classList.add('show');modalCard.innerHTML=`<h3>Add Member</h3><div style='display:flex;flex-direction:column;gap:8px;margin-top:8px'><input id='m-name' class='input' placeholder='Full name'/><input id='m-role' class='input' placeholder='Role'/><div style='display:flex;justify-content:flex-end;gap:8px'><button class='btn ghost' id='cancel-m'>Cancel</button><button class='btn' id='save-m'>Save</button></div></div>`;document.getElementById('cancel-m').addEventListener('click',closeModal);document.getElementById('save-m').addEventListener('click', ()=>{const name=document.getElementById('m-name').value.trim();const role=document.getElementById('m-role').value.trim();if(!name){alert('Enter name');return}state.members.unshift({id:Date.now(),name,role});persist();renderTeam();renderProjectOptions();closeModal();});}

    function openEditMember(id){const m = state.members.find(x=>x.id===id);if(!m) return;modal.classList.add('show');modalCard.innerHTML=`<h3>Edit Member</h3><div style='display:flex;flex-direction:column;gap:8px;margin-top:8px'><input id='m-name' class='input' value='${escapeHtml(m.name)}'/><input id='m-role' class='input' value='${escapeHtml(m.role)}'/><div style='display:flex;justify-content:flex-end;gap:8px'><button class='btn ghost' id='cancel-m'>Cancel</button><button class='btn' id='save-m'>Save</button><button class='btn ghost' id='del-m'>Delete</button></div></div>`;document.getElementById('cancel-m').addEventListener('click',closeModal);document.getElementById('save-m').addEventListener('click', ()=>{m.name=document.getElementById('m-name').value.trim();m.role=document.getElementById('m-role').value.trim();persist();renderTeam();renderProjects();closeModal();});document.getElementById('del-m').addEventListener('click', ()=>{if(confirm('Remove member? This will unlink them from projects.')){state.members=state.members.filter(x=>x.id!==m.id);state.projects.forEach(p=>{p.members=p.members.filter(mid=>mid!==m.id)});persist();renderTeam();renderProjects();closeModal();}});
    }

    // Edit project
    function openEditProject(pid){const p = state.projects.find(x=>x.id===pid);if(!p) return;modal.classList.add('show');modalCard.innerHTML=`<h3>Edit Project</h3><div style='display:flex;flex-direction:column;gap:8px;margin-top:8px'><input id='proj-name' class='input' value='${escapeHtml(p.name)}'/><textarea id='proj-desc' class='input' rows='3'>${escapeHtml(p.desc||'')}</textarea><div style='font-size:13px;color:var(--muted)'>Assign members</div><div id='proj-members' class='chips'></div><div style='display:flex;justify-content:flex-end;gap:8px'><button class='btn ghost' id='cancel-proj'>Cancel</button><button class='btn' id='save-proj'>Save</button></div></div>`;
      const chips = document.getElementById('proj-members');
      for(const m of state.members){const c=document.createElement('div');c.className='chip';c.textContent=m.name;c.dataset.id=m.id; if(p.members.includes(m.id)) c.classList.add('active'); chips.appendChild(c); c.addEventListener('click', ()=>c.classList.toggle('active'))}
      document.getElementById('cancel-proj').addEventListener('click', closeModal);
      document.getElementById('save-proj').addEventListener('click', ()=>{p.name=document.getElementById('proj-name').value.trim();p.desc=document.getElementById('proj-desc').value.trim();p.members=Array.from(chips.querySelectorAll('.chip.active')).map(c=>parseInt(c.dataset.id));persist();renderProjects();renderTeam();renderProjectOptions();closeModal();});
    }

    function updateCounts(){document.getElementById('count-projects').textContent = state.projects.length;document.getElementById('count-assets').textContent = state.assets.length;document.getElementById('count-projects').textContent = state.projects.length;}

    // Member filter chips
    function renderMemberFilter(){const wrap=document.getElementById('member-filter');wrap.innerHTML='';const all = document.createElement('div');all.className='chip active';all.textContent='All';wrap.appendChild(all);all.addEventListener('click', ()=>{wrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));all.classList.add('active');renderProjects();});
      for(const m of state.members){const c=document.createElement('div');c.className='chip';c.textContent=m.name;c.dataset.id=m.id;wrap.appendChild(c);c.addEventListener('click', ()=>{wrap.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));c.classList.add('active'); // filter
        q.value = m.name; renderProjects();});}
    }

    // Import sample projects + assets
    function importSample(){
      // lightweight placeholders
      const p1 = {id:1001,name:'Neon Opener',desc:'VFX titles and compositing',members:[1,2],created:new Date().toISOString(),assets:[]};
      const p2 = {id:1002,name:'City Matte',desc:'Matte painting + rotoscope',members:[3,4],created:new Date().toISOString(),assets:[]};
      const a1 = {id:9001,name:'Neon Opener Edit.mp4',type:'video',mime:'video/mp4',url:placeholderImageURL(),size:4200000,created:new Date().toISOString()};
      const a2 = {id:9002,name:'City Matte.jpg',type:'image',mime:'image/jpeg',url:placeholderImageURL(),size:540000,created:new Date().toISOString()};
      state.projects.unshift(p2,p1); state.assets.unshift(a2,a1); p1.assets.unshift(a1.id); p2.assets.unshift(a2.id); persist(); renderProjects(); renderTeam(); renderProjectOptions(); updateCounts();
    }

    function placeholderImageURL(){return 'data:image/svg+xml;utf8,'+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='640' height='360'><rect width='100%' height='100%' fill='%23071b2a'/><text x='50%' y='50%' font-size='24' fill='%23aab8c8' dominant-baseline='middle' text-anchor='middle'>Wristband Preview</text></svg>`);}    

    function escapeHtml(s){if(!s) return ''; return s.replace(/[&<>\"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m];});}

    // kick off
    init();
  </script>
</body>
</html>
